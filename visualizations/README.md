End-to-end visualization code.
